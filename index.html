<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Peoria Clear Guard | Luxury Automotive Protection</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;500;700;900&family=Exo+2:wght@300;400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>

    <style>
        /* --- 1. TITANIUM THEME VARIABLES --- */
        :root {
            --primary: #0077ff;
            --secondary: #00c3ff;
            --accent: #ffb700;
            --warning: #ff3333;
            --bg-deep: #050505;
            --bg-surface: #0a0a0a;
            --text-main: #ffffff;
            --text-body: #b0b0b0;
            --glow: 0 0 20px rgba(0, 119, 255, 0.4);
            --ease: cubic-bezier(0.23, 1, 0.32, 1);
        }

        /* --- 2. BASE & RESET --- */
        * { margin: 0; padding: 0; box-sizing: border-box; scroll-behavior: smooth; -webkit-tap-highlight-color: transparent; }
        
        body {
            background-color: var(--bg-deep);
            color: var(--text-main);
            font-family: 'Exo 2', sans-serif;
            line-height: 1.7;
            overflow-x: hidden;
        }

        h1, h2, h3, h4, .font-tech { font-family: 'Orbitron', sans-serif; text-transform: uppercase; letter-spacing: 2px; }
        p { color: var(--text-body); font-size: 1.05rem; font-weight: 300; margin-bottom: 20px; }
        img { width: 100%; height: 100%; object-fit: cover; display: block; }
        a { text-decoration: none; color: inherit; transition: 0.3s; }
        ul { list-style: none; }

        /* Custom Scrollbar */
        ::-webkit-scrollbar { width: 6px; }
        ::-webkit-scrollbar-track { background: #000; }
        ::-webkit-scrollbar-thumb { background: var(--secondary); border-radius: 4px; }

        /* --- 3. NAVIGATION --- */
        nav {
            position: fixed; 
            top: 0; left: 0; width: 100%; 
            height: 150px; 
            padding: 0 5%;
            display: flex; justify-content: space-between; align-items: center;
            background: rgba(5, 5, 5, 0.90); backdrop-filter: blur(20px);
            border-bottom: none; 
            z-index: 1000; transition: 0.3s;
        }
        
        .logo-container img { 
            height: 140px; 
            width: auto; 
            filter: drop-shadow(0 0 15px rgba(0,119,255,0.4)) brightness(1.2) contrast(1.1); 
            transition: 0.4s var(--ease); 
        }
        
        .nav-menu { display: flex; gap: 40px; }
        .nav-link { font-size: 0.8rem; font-weight: 600; letter-spacing: 1.5px; position: relative; color: #ccc; }
        .nav-link::after { content: ''; position: absolute; bottom: -5px; left: 0; width: 0; height: 1px; background: var(--secondary); transition: 0.3s var(--ease); }
        .nav-link:hover { color: white; }
        .nav-link:hover::after { width: 100%; }
        
        .btn-glow {
            padding: 12px 30px; background: transparent; color: var(--secondary);
            border: 1px solid var(--secondary); font-family: 'Orbitron'; font-size: 0.75rem; font-weight: 700;
            cursor: pointer; position: relative; overflow: hidden; transition: 0.4s;
        }
        .btn-glow:hover { background: var(--secondary); color: black; box-shadow: 0 0 30px var(--glow); }

        /* MOBILE MENU STYLES */
        .mobile-menu-btn { display: none; font-size: 1.5rem; color: white; background: none; border: none; cursor: pointer; }
        .mobile-nav-overlay {
            position: fixed; top: 90px; left: 0; width: 100%; height: 0;
            background: rgba(10, 10, 10, 0.98); backdrop-filter: blur(20px);
            overflow: hidden; transition: 0.4s var(--ease); z-index: 999;
            border-bottom: 1px solid var(--secondary);
        }
        .mobile-nav-overlay.active { height: 350px; }
        .mobile-nav-links { display: flex; flex-direction: column; align-items: center; justify-content: center; height: 100%; gap: 20px; }
        .mobile-nav-links a { font-family: 'Orbitron'; font-size: 1.2rem; color: white; letter-spacing: 2px; }

        /* --- 4. HERO SECTION --- */
        .hero {
            height: 100vh; width: 100%; display: flex; align-items: center; justify-content: center; text-align: center;
            position: relative; overflow: hidden; background: #000;
        }
        /* FLUID CANVAS STYLING */
        canvas {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            z-index: 5; opacity: 0.6; pointer-events: none; mix-blend-mode: screen;
        }
        .hero-video { position: absolute; top: 0; left: 0; width: 100%; height: 100%; object-fit: cover; z-index: 0; opacity: 1.0; }
        .hero-overlay { position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: linear-gradient(to bottom, rgba(0,0,0,0.3), rgba(0,0,0,0.8)); z-index: 1; pointer-events: none; }
        .hero-content { z-index: 10; max-width: 1000px; padding: 20px; position: relative; margin-top: 80px; }
        .hero-title {
            font-size: 4rem; line-height: 1.1; margin-bottom: 20px; font-weight: 900;
            text-shadow: 0 5px 30px rgba(0,0,0,0.8);
            background: linear-gradient(to right, #fff, #bbb); -webkit-background-clip: text; -webkit-text-fill-color: transparent;
            opacity: 0; animation: unblurText 1.5s var(--ease) forwards; animation-delay: 0.2s;
        }
        .hero-sub { 
            color: var(--secondary); font-size: 1.1rem; letter-spacing: 5px; margin-bottom: 40px; text-shadow: 0 0 20px rgba(0,0,0,1); 
            opacity: 0; animation: unblurText 1.5s var(--ease) forwards; animation-delay: 0.6s;
        }

        /* --- 5. MARQUEE --- */
        .marquee-wrap { background: #000; border-top: 1px solid #111; border-bottom: 1px solid #111; padding: 20px 0; overflow: hidden; white-space: nowrap; position: relative; z-index: 2; }
        .marquee { display: inline-block; animation: marqueeSlide 20s linear infinite; }
        .brand { display: inline-block; margin: 0 50px; color: #333; font-family: 'Orbitron'; font-weight: 900; font-size: 1.2rem; transition: 0.3s; }
        .marquee:hover .brand { color: var(--secondary); text-shadow: 0 0 10px var(--secondary); }
        @keyframes marqueeSlide { 0% { transform: translateX(0); } 100% { transform: translateX(-50%); } }
        
        /* --- 6. GLOBAL SECTION STYLES --- */
        .section-pad { padding: 80px 8%; position: relative; }
        .section-header { text-align: center; margin-bottom: 60px; }
        .section-header h2 { font-size: 3rem; margin-bottom: 10px; }
        .section-header span { color: var(--primary); }
        .divider { width: 60px; height: 3px; background: linear-gradient(to right, var(--primary), var(--secondary)); margin: 20px auto; border-radius: 2px; }

        /* --- 7. ABOUT --- */
        .about-wrapper { display: flex; align-items: center; gap: 80px; }
        .about-content { flex: 1; }
        .section-label { color: var(--primary); font-family: 'Orbitron'; font-size: 0.9rem; letter-spacing: 2px; margin-bottom: 10px; display: block; font-weight: 700; }
        .section-title-large { font-family: 'Orbitron'; font-size: 2.8rem; color: white; margin-bottom: 30px; font-weight: 700; line-height: 1.2; }
        .check-list li { margin-bottom: 15px; font-size: 1rem; color: white; display: flex; align-items: center; }
        .check-list i { color: var(--secondary); margin-right: 15px; font-size: 1.1rem; }
        .about-image-container { flex: 1.2; position: relative; padding-top: 30px; padding-left: 30px; }
        .about-img-main { border-radius: 4px; position: relative; z-index: 2; box-shadow: 0 20px 50px rgba(0,0,0,0.5); }
        .corner-accent { position: absolute; top: 0; left: 0; width: 100px; height: 100px; border-top: 4px solid var(--secondary); border-left: 4px solid var(--secondary); z-index: 1; }

        /* --- 8. FEATURES (WITH 3D TILT) --- */
        .feature-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 30px; }
        
        .tilt-card {
            background: var(--bg-surface); padding: 40px 30px; border-radius: 8px; position: relative;
            border: 1px solid rgba(255,255,255,0.05); overflow: hidden;
            /* 3D TILT PROPERTIES */
            transform-style: preserve-3d;
            transform: perspective(1000px);
            transition: transform 0.1s ease-out;
        }
        
        .tilt-card::after {
            content: "";
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            background: radial-gradient(circle at var(--x, 50%) var(--y, 50%), rgba(255,255,255,0.1) 0%, transparent 50%);
            opacity: 0;
            transition: opacity 0.5s;
            pointer-events: none;
            z-index: 2;
        }
        .tilt-card:hover::after { opacity: 1; }

        .tilt-card::before {
            content: ''; position: absolute; top: 0; left: 0; width: 100%; height: 3px;
            background: linear-gradient(to right, var(--primary), var(--secondary));
            transform: scaleX(0); transform-origin: left; transition: 0.4s var(--ease);
        }
        .tilt-card:hover::before { transform: scaleX(1); }
        
        .f-icon { font-size: 2rem; color: var(--secondary); margin-bottom: 20px; transform: translateZ(20px); }
        .feature-card h4 { font-size: 1.2rem; margin-bottom: 10px; transform: translateZ(10px); }
        .feature-card p { transform: translateZ(5px); }

        /* --- 9. PROCESS --- */
        .process-container { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 40px; margin-top: 50px; }
        .process-step {
            background: linear-gradient(160deg, #0a0a0a, #000); border: 1px solid #1a1a1a;
            padding: 40px; position: relative; border-radius: 8px; overflow: hidden; transition: 0.4s ease;
        }
        .process-step:hover { border-color: var(--secondary); transform: translateY(-5px); box-shadow: 0 10px 30px rgba(0,0,0,0.5); }
        .step-number {
            position: absolute; top: -15px; right: 15px; font-family: 'Orbitron'; font-weight: 900;
            font-size: 5rem; color: #111; z-index: 0; transition: 0.4s;
        }
        .process-step:hover .step-number { color: rgba(0, 195, 255, 0.1); }
        .step-content { position: relative; z-index: 1; }
        .step-icon { font-size: 2rem; color: var(--primary); margin-bottom: 20px; display: inline-block; }
        .step-title { font-size: 1.3rem; margin-bottom: 15px; color: white; letter-spacing: 1px; }
        .step-desc { font-size: 0.95rem; color: #aaa; line-height: 1.6; }
        .disclaimer-box { margin-top: 15px; padding: 10px; background: rgba(255, 183, 0, 0.05); border-left: 2px solid var(--accent); font-size: 0.85rem; color: #ddd; }

        /* --- 10. GALLERY --- */
        .gallery-scroll-container { display: flex; flex-direction: column; gap: 25px; overflow: hidden; background: #000; padding: 50px 0; position: relative; min-height: 500px; }
        .gallery-scroll-container::before, .gallery-scroll-container::after { content: ''; position: absolute; width: 150px; height: 100%; top: 0; z-index: 10; pointer-events: none; }
        .gallery-scroll-container::before { left: 0; background: linear-gradient(to right, #000, transparent); }
        .gallery-scroll-container::after { right: 0; background: linear-gradient(to left, #000, transparent); }
        .scroll-track { display: flex; gap: 20px; width: max-content; }
        .scroll-left { animation: scrollLeft 80s linear infinite; }
        .scroll-right { animation: scrollRight 90s linear infinite; }
        .scroll-card {
            width: 400px; height: 250px; position: relative; border-radius: 4px; overflow: hidden; flex-shrink: 0;
            border: 1px solid #222; cursor: pointer; transition: 0.4s ease-out; filter: grayscale(80%) brightness(0.7);
        }
        .scroll-card img { width: 100%; height: 100%; object-fit: cover; transition: 0.7s; }
        .scroll-overlay { position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.3); display: flex; align-items: center; justify-content: center; opacity: 0; transition: 0.3s; }
        .scroll-overlay i { font-size: 2rem; color: var(--secondary); transform: scale(0.5); transition: 0.3s; }
        .scroll-card:hover { filter: grayscale(0%) brightness(1); border-color: var(--secondary); transform: scale(1.02); z-index: 5; box-shadow: 0 10px 40px rgba(0, 195, 255, 0.2); }
        .scroll-card:hover img { transform: scale(1.1); }
        .scroll-card:hover .scroll-overlay { opacity: 1; }
        .scroll-card:hover .scroll-overlay i { transform: scale(1); }
        .gallery-scroll-container:hover .scroll-track { animation-play-state: paused; }

        /* --- 11. TESTIMONIALS --- */
        .reviews-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 30px; }
        .review-card { background: #0e0e0e; padding: 30px; border: 1px solid #1a1a1a; border-radius: 4px; position: relative; }
        .review-stars { color: var(--accent); margin-bottom: 15px; font-size: 0.9rem; }
        .review-text { font-style: italic; color: #ccc; font-size: 1rem; margin-bottom: 20px; }
        .reviewer { display: flex; align-items: center; gap: 15px; }
        .reviewer-avatar { width: 40px; height: 40px; background: #222; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; font-weight: 700; }
        .reviewer-info h5 { font-size: 0.9rem; color: white; }
        .reviewer-info span { font-size: 0.8rem; color: #666; }

        /* --- 12. FAQ --- */
        .faq-container { max-width: 800px; margin: 0 auto; }
        .faq-item { border-bottom: 1px solid #222; margin-bottom: 10px; }
        .faq-question { width: 100%; text-align: left; padding: 20px; background: transparent; border: none; color: white; font-family: 'Exo 2'; font-size: 1.1rem; cursor: pointer; display: flex; justify-content: space-between; align-items: center; transition: 0.3s; }
        .faq-question:hover { color: var(--secondary); }
        .faq-answer { max-height: 0; overflow: hidden; padding: 0 20px; color: #aaa; transition: max-height 0.4s ease; font-size: 0.95rem; }
        .faq-item.active .faq-answer { max-height: 200px; padding-bottom: 20px; }
        .faq-icon { transition: 0.3s; }
        .faq-item.active .faq-icon { transform: rotate(180deg); color: var(--secondary); }

        /* --- 13. PRICING --- */
        .price-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(320px, 1fr)); gap: 40px; }
        .price-card.featured { border-color: var(--secondary); background: linear-gradient(160deg, #0a0a0a, #00121a); }
        .pkg-list { text-align: left; margin-bottom: 30px; border-top: 1px solid #222; padding-top: 20px; transform: translateZ(5px); }
        .pkg-list li { margin-bottom: 12px; color: #ccc; font-size: 0.95rem; display: flex; align-items: center; }
        .pkg-list i { color: var(--secondary); margin-right: 12px; font-size: 0.8rem; }
        .pkg-title { transform: translateZ(20px); }

        /* --- 14. CONTACT GLASS --- */
        .contact-section {
            background: linear-gradient(27deg, #151515 5px, transparent 5px) 0 5px, linear-gradient(207deg, #151515 5px, transparent 5px) 10px 0px, linear-gradient(27deg, #222 5px, transparent 5px) 0px 10px, linear-gradient(207deg, #222 5px, transparent 5px) 10px 5px, linear-gradient(90deg, #1b1b1b 10px, transparent 10px), linear-gradient(#1d1d1d 25%, #1a1a1a 25%, #1a1a1a 50%, transparent 50%, transparent 75%, #242424 75%, #242424);
            background-color: #131313; background-size: 20px 20px; position: relative;
        }
        .contact-glass { background: rgba(15, 15, 15, 0.85); backdrop-filter: blur(15px); border: 1px solid rgba(255, 255, 255, 0.08); max-width: 1200px; margin: 0 auto; display: flex; flex-wrap: wrap; box-shadow: 0 30px 60px rgba(0,0,0,0.8); border-radius: 8px; overflow: hidden; min-height: 500px; }
        .c-info { flex: 1; padding: 60px; background: linear-gradient(135deg, rgba(0, 119, 255, 0.1), rgba(0,0,0,0)); border-right: 1px solid rgba(255,255,255,0.05); display: flex; flex-direction: column; justify-content: center; }
        .c-info h3 { font-size: 2rem; margin-bottom: 20px; color: white; }
        .c-item { margin-bottom: 30px; }
        .c-item span { color: var(--secondary); font-size: 0.8rem; font-family: 'Orbitron'; letter-spacing: 2px; display: block; margin-bottom: 5px; }
        .c-item p { color: #ccc; font-size: 1.1rem; margin: 0; }
        
        .appt-warning {
            color: var(--warning); font-weight: 700; font-family: 'Orbitron'; font-size: 0.9rem; letter-spacing: 1px;
            margin-top: 15px; display: inline-block; border: 1px solid var(--warning); padding: 10px; background: rgba(255, 51, 51, 0.1);
        }

        .c-form { flex: 1.5; padding: 60px; background: rgba(0,0,0,0.2); position: relative; }
        .form-row { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 25px; }
        .field-wrap { position: relative; }
        .input-glow { width: 100%; padding: 15px 0; background: transparent; border: none; border-bottom: 2px solid #333; color: white; font-family: 'Exo 2'; font-size: 1.1rem; transition: 0.3s; }
        .input-glow:-webkit-autofill, .input-glow:-webkit-autofill:hover, .input-glow:-webkit-autofill:focus, .input-glow:-webkit-autofill:active{ -webkit-box-shadow: 0 0 0 30px #0e0e0e inset !important; -webkit-text-fill-color: white !important; transition: background-color 5000s ease-in-out 0s; }
        .input-glow:focus { outline: none; border-bottom-color: var(--secondary); }
        .label-glow { position: absolute; left: 0; top: 15px; color: #666; pointer-events: none; transition: 0.3s; }
        .input-glow:focus ~ .label-glow, .input-glow:valid ~ .label-glow { top: -10px; font-size: 0.8rem; color: var(--secondary); }
        .submit-btn { width: 100%; padding: 18px; background: var(--primary); color: white; border: none; font-family: 'Orbitron'; font-weight: 700; font-size: 1rem; letter-spacing: 2px; cursor: pointer; margin-top: 10px; transition: 0.3s; text-transform: uppercase; }
        .submit-btn:hover { background: var(--secondary); box-shadow: 0 0 25px var(--glow); letter-spacing: 4px; }
        .submit-btn:disabled { background: #333; color: #777; cursor: not-allowed; box-shadow: none; }
        .success-message { display: none; flex-direction: column; align-items: center; justify-content: center; text-align: center; height: 100%; animation: fadeUp 0.6s var(--ease); }
        .success-icon { font-size: 4rem; color: var(--secondary); margin-bottom: 20px; text-shadow: 0 0 20px var(--glow); }
        .success-title { font-family: 'Orbitron'; font-size: 2rem; color: white; margin-bottom: 10px; }
        .success-text { color: #ccc; max-width: 80%; }

        /* --- 15. UTILS --- */
        @keyframes unblurText { 0% { filter: blur(20px); opacity: 0; transform: translateY(10px); } 100% { filter: blur(0); opacity: 1; transform: translateY(0); } }
        @keyframes fadeUp { from { opacity:0; transform:translateY(30px); } to { opacity:1; transform:translateY(0); } }
        @keyframes scrollLeft { 0% { transform: translateX(0); } 100% { transform: translateX(-50%); } }
        @keyframes scrollRight { 0% { transform: translateX(-50%); } 100% { transform: translateX(0); } }
        
        .reveal-blur { opacity: 0; transition: all 1s ease; }
        .reveal-blur.active { animation: unblurText 1.2s forwards; }
        .reveal { opacity: 0; transform: translateY(40px); transition: 0.8s var(--ease); }
        .reveal.active { opacity: 1; transform: translateY(0); }
        
        .lightbox { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.95); display: none; align-items: center; justify-content: center; z-index: 2000; opacity: 0; transition: 0.3s; }
        .lightbox.active { display: flex; opacity: 1; }
        .lightbox img { max-height: 90vh; max-width: 90vw; border: 1px solid var(--secondary); }
        .close-lb { position: absolute; top: 30px; right: 40px; color: white; font-size: 3rem; cursor: pointer; }

        /* --- FLOATING BUTTONS (FIXED Z-INDEX) --- */
        .fab-container { 
            position: fixed; bottom: 30px; right: 30px; 
            z-index: 2000; /* Increased to stay above all content */
            display: flex; flex-direction: column; gap: 15px; align-items: center; 
        }
        .fab { width: 60px; height: 60px; background: var(--bg-surface); border-radius: 50%; display: flex; align-items: center; justify-content: center; box-shadow: 0 5px 20px rgba(0,0,0, 0.5); font-size: 24px; color: white; transition: 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275); cursor: pointer; border: 2px solid rgba(255,255,255,0.1); position: relative; }
        .fab-call { background: var(--primary); }
        .fab-sms { background: #00d26a; } 
        .fab-loc { background: #ff3333; } 
        .fab:hover { transform: scale(1.1) translateX(-5px); color: white; z-index: 901; }
        .fab-call:hover { background: var(--secondary); box-shadow: 0 0 20px var(--secondary); }
        .fab-sms:hover { background: #00ff80; box-shadow: 0 0 20px #00ff80; }
        .fab-loc:hover { background: #ff0000; box-shadow: 0 0 20px #ff0000; }

        /* --- MAP SECTION --- */
        .map-wrapper { width: 100%; height: 450px; position: relative; background: #111; display: flex; flex-direction: column; border-top: 1px solid #333; border-bottom: 1px solid #333; }
        .map-frame { width: 100%; height: 100%; border: 0; filter: grayscale(100%) invert(92%) contrast(83%); opacity: 0.8; transition: 0.3s; }
        .map-frame:hover { filter: grayscale(0%) invert(0%); opacity: 1; }
        .map-overlay-text { position: absolute; bottom: 0; left: 0; width: 100%; background: rgba(0,0,0,0.8); color: var(--warning); text-align: center; padding: 15px; font-family: 'Orbitron'; font-weight: 700; letter-spacing: 2px; border-top: 1px solid var(--warning); }

        /* --- FOOTER --- */
        footer { text-align: center; padding: 40px 20px; background: #000; display: flex; flex-direction: column; align-items: center; justify-content: center; }
        .socials { margin-top: 20px; display: flex; justify-content: center; gap: 20px; }
        .socials a { width: 50px; height: 50px; border-radius: 50%; border: 1px solid #333; display: flex; align-items: center; justify-content: center; transition: 0.3s; font-size: 1.5rem; color: #ccc; }
        .socials a:hover { border-color: var(--secondary); color: var(--secondary); }

        /* --- MOBILE OPTIMIZATION --- */
        @media(max-width: 900px) {
            nav { padding: 0 20px; height: 90px; } 
            .logo-container img { height: 70px; }
            .nav-menu { display: none; }
            .mobile-menu-btn { display: block; }
            .btn-glow { display: none; }
            .hero-title { font-size: 2.2rem; line-height: 1.2; }
            .hero-sub { font-size: 0.9rem; letter-spacing: 3px; }
            .section-pad { padding: 50px 5%; }
            .section-header h2 { font-size: 2rem; }
            .about-wrapper, .contact-glass { flex-direction: column; }
            .about-image-container { width: 100%; padding-left: 0; margin-top: 30px; }
            .c-info, .c-form { padding: 30px 20px; border-right: none; border-bottom: 1px solid rgba(255,255,255,0.1); }
            .form-row { grid-template-columns: 1fr; }
            .scroll-card { width: 85vw; height: 220px; }
            .fab-container { right: 20px; bottom: 20px; }
            .fab { width: 50px; height: 50px; font-size: 20px; }
            .map-wrapper { height: 300px; }
        }
    </style>
</head>
<body>

    <nav>
        <div class="logo-container">
            <img src="Logoo.png" alt="Peoria Clear Guard Logo">
        </div>
        <ul class="nav-menu">
            <li><a href="#about" class="nav-link">ABOUT</a></li>
            <li><a href="#features" class="nav-link">FEATURES</a></li>
            <li><a href="#gallery" class="nav-link">GALLERY</a></li>
            <li><a href="#packages" class="nav-link">PRICING</a></li>
        </ul>
        <button class="btn-glow" onclick="document.getElementById('contact').scrollIntoView()">REQUEST QUOTE</button>
        <button class="mobile-menu-btn" onclick="toggleMobileMenu()"><i class="fa-solid fa-bars"></i></button>
    </nav>

    <div class="mobile-nav-overlay" id="mobile-nav">
        <div class="mobile-nav-links">
            <a href="#about" onclick="toggleMobileMenu()">ABOUT</a>
            <a href="#features" onclick="toggleMobileMenu()">FEATURES</a>
            <a href="#gallery" onclick="toggleMobileMenu()">GALLERY</a>
            <a href="#packages" onclick="toggleMobileMenu()">PRICING</a>
            <a href="#contact" onclick="toggleMobileMenu()" style="color:var(--secondary);">REQUEST QUOTE</a>
        </div>
    </div>

    <header class="hero">
        <canvas></canvas>
        <video autoplay muted loop playsinline class="hero-video">
            <source src="3D.mp4" type="video/mp4">
        </video>
        <div class="hero-overlay"></div>

        <div class="hero-content">
            <h1 class="hero-title">Peoria Clear Guard</h1>
            <h2 class="hero-sub">PRESERVE PERFECTION</h2>
            <button class="btn-glow" style="font-size: 1rem; padding: 15px 40px; display:inline-block;" onclick="document.getElementById('gallery').scrollIntoView()">VIEW SHOWCASE</button>
        </div>
    </header>

    <div class="marquee-wrap">
        <div class="marquee">
            <span class="brand">TESLA</span>
            <span class="brand">PORSCHE</span>
            <span class="brand">FERRARI</span>
            <span class="brand">LAMBORGHINI</span>
            <span class="brand">MERCEDES-BENZ</span>
            <span class="brand">BMW</span>
            <span class="brand">XPEL AUTHORIZED</span>
            <span class="brand">TESLA</span>
            <span class="brand">PORSCHE</span>
            <span class="brand">FERRARI</span>
        </div>
    </div>

    <section id="about" class="section-pad" style="padding-bottom: 0;">
        <div class="about-wrapper reveal-blur">
            <div class="about-content">
                <span class="section-label">WHO WE ARE</span>
                <h2 class="section-title-large">PEORIA CLEAR GUARD</h2>
                <p>We are a trusted and certified XPEL installer. We use only high quality film and equipment. We stand by our product and installation. When you choose us, be assured of quality and guarantee that comes with our name.</p>
                <p>XPEL is a film proven to perform under harshest conditions. It does not turn yellow, bend, or fold. This is the best protection you can choose for your car from the moment you purchase a vehicle.</p>
                <ul class="check-list">
                    <li><i class="fa-solid fa-check"></i> Certified Installers</li>
                    <li><i class="fa-solid fa-check"></i> Precision Cut Patterns</li>
                    <li><i class="fa-solid fa-check"></i> 10-Year Warranty</li>
                </ul>
            </div>
            <div class="about-image-container">
                <div class="corner-accent"></div>
                <img src="Luxury.png" class="about-img-main" alt="Luxury Car">
            </div>
        </div>
    </section>

    <section id="features" class="section-pad" style="background: #080808; padding-top: 20px; padding-bottom: 20px;">
        <div class="section-header reveal-blur">
            <h2>THE <span>UPGRADE</span></h2>
            <div class="divider"></div>
            <p>Why XPEL Paint Protection Film is the single best investment for your vehicle.</p>
        </div>
        <div class="feature-grid reveal-blur">
            <div class="tilt-card feature-card">
                <div class="f-icon"><i class="fa-solid fa-shield-halved"></i></div>
                <h4>Invisible Armor</h4>
                <p>High-quality film provides an invisible shield, protecting original paintwork from road debris and stone chips.</p>
            </div>
            <div class="tilt-card feature-card">
                <div class="f-icon"><i class="fa-solid fa-wand-magic-sparkles"></i></div>
                <h4>Self-Healing</h4>
                <p>Advanced polymers allow minor scratches to disappear with heat, maintaining a flawless surface.</p>
            </div>
            <div class="tilt-card feature-card">
                <div class="f-icon"><i class="fa-solid fa-gem"></i></div>
                <h4>Optical Clarity</h4>
                <p>Engineered to resist yellowing and maintain depth, ensuring your car turns heads for years.</p>
            </div>
            <div class="tilt-card feature-card">
                <div class="f-icon"><i class="fa-solid fa-droplet"></i></div>
                <h4>Hydrophobic</h4>
                <p>Smooth surface technology repels water and dirt, making maintenance incredibly easy.</p>
            </div>
            <div class="tilt-card feature-card">
                <div class="f-icon"><i class="fa-solid fa-arrow-trend-up"></i></div>
                <h4>Resale Value</h4>
                <p>Protecting your investment ensures a significantly higher resale price when you upgrade.</p>
            </div>
        </div>
    </section>

    <section id="process" class="section-pad" style="padding-top: 40px;">
        <div class="section-header reveal-blur">
            <h2>OUR <span>PROCESS</span></h2>
            <div class="divider"></div>
            <p>Precision execution from drop-off to delivery.</p>
        </div>
        <div class="process-container reveal">
            <div class="process-step">
                <div class="step-number">01</div>
                <div class="step-content">
                    <i class="fa-solid fa-calendar-check step-icon"></i>
                    <h3 class="step-title">APPOINTMENT</h3>
                    <p class="step-desc">During car drop off we perform full vehicle/body inspection and odometer check. We want you to feel secure leaving your car with us.</p>
                </div>
            </div>
            <div class="process-step">
                <div class="step-number">02</div>
                <div class="step-content">
                    <i class="fa-solid fa-spray-can-sparkles step-icon"></i>
                    <h3 class="step-title">INSTALLATION</h3>
                    <p class="step-desc">We start by pressure washing your car thoroughly after a detailed soap wash. At a later stage we clay bar and prep the area where the film is to be applied.</p>
                    <div class="disclaimer-box">
                        <i class="fa-solid fa-circle-info"></i> Note: Liquid bubbles may appear and will evaporate during curing.
                    </div>
                </div>
            </div>
            <div class="process-step">
                <div class="step-number">03</div>
                <div class="step-content">
                    <i class="fa-solid fa-key step-icon"></i>
                    <h3 class="step-title">PICK-UP</h3>
                    <p class="step-desc">During pick up we make sure you are satisfied with our work.</p>
                    <p class="step-desc" style="color:var(--text-main);"><strong>Note:</strong> We suggest to restrain from car washing for 14 days to allow full curing.</p>
                </div>
            </div>
        </div>
    </section>

    <section id="reviews" class="section-pad" style="background: #080808;">
        <div class="section-header reveal-blur">
            <h2>CLIENT <span>VERDICT</span></h2>
            <div class="divider"></div>
        </div>
        <div class="reviews-grid reveal">
            <div class="review-card">
                <div class="review-stars"><i class="fa-solid fa-star"></i><i class="fa-solid fa-star"></i><i class="fa-solid fa-star"></i><i class="fa-solid fa-star"></i><i class="fa-solid fa-star"></i></div>
                <p class="review-text">"Absolutely flawless work on my Model S. You literally cannot see the film. The team at Peoria Clear Guard are true artists."</p>
                <div class="reviewer">
                    <div class="reviewer-avatar">JD</div>
                    <div class="reviewer-info"><h5>John D.</h5><span>Tesla Model S</span></div>
                </div>
            </div>
            <div class="review-card">
                <div class="review-stars"><i class="fa-solid fa-star"></i><i class="fa-solid fa-star"></i><i class="fa-solid fa-star"></i><i class="fa-solid fa-star"></i><i class="fa-solid fa-star"></i></div>
                <p class="review-text">"Professional, fast, and the car looks better than when I bought it. The ceramic coating on top of the PPF makes cleaning so easy."</p>
                <div class="reviewer">
                    <div class="reviewer-avatar">MR</div>
                    <div class="reviewer-info"><h5>Mike R.</h5><span>Porsche 911</span></div>
                </div>
            </div>
            <div class="review-card">
                <div class="review-stars"><i class="fa-solid fa-star"></i><i class="fa-solid fa-star"></i><i class="fa-solid fa-star"></i><i class="fa-solid fa-star"></i><i class="fa-solid fa-star"></i></div>
                <p class="review-text">"Worth every penny to protect the paint on my truck. No more rock chips on the highway. Highly recommended."</p>
                <div class="reviewer">
                    <div class="reviewer-avatar">TS</div>
                    <div class="reviewer-info"><h5>Tony S.</h5><span>Ford Raptor</span></div>
                </div>
            </div>
        </div>
    </section>

    <section id="gallery" class="section-pad" style="overflow:hidden; padding: 100px 0;">
        <div class="section-header reveal-blur">
            <h2>THE <span>COLLECTION</span></h2>
            <div class="divider"></div>
            <p>A moving showcase of our finest work.</p>
        </div>

        <div class="gallery-scroll-container reveal">
            <div class="scroll-track scroll-left" id="track-top"></div>
            <div class="scroll-track scroll-right" id="track-bottom"></div>
        </div>
    </section>

    <section id="packages" class="section-pad" style="background: #080808;">
        <div class="section-header reveal-blur">
            <h2>PROTECTION <span>TIERS</span></h2>
            <div class="divider"></div>
        </div>
        <div class="price-grid reveal">
            <div class="tilt-card price-card">
                <h3 class="pkg-title">PARTIAL FRONT</h3>
                <span class="pkg-sub">Essential Coverage</span>
                <ul class="pkg-list">
                    <li><i class="fa-solid fa-check"></i> Partial Hood (24")</li>
                    <li><i class="fa-solid fa-check"></i> Partial Front Fenders</li>
                    <li><i class="fa-solid fa-check"></i> Front Bumper</li>
                    <li><i class="fa-solid fa-check"></i>  Headlights & Mirrors </li>
                </ul>
                <button class="btn-glow" style="width:100%; margin-top:20px;" onclick="document.getElementById('contact').scrollIntoView()">SELECT TIER</button>
            </div>
            <div class="tilt-card price-card featured">
                <h3 class="pkg-title">FULL FRONT</h3>
                <span class="pkg-sub" style="color:var(--secondary)">Recommended</span>
                <ul class="pkg-list">
                    <li><i class="fa-solid fa-check"></i> Full Hood </li>
                    <li><i class="fa-solid fa-check"></i> Full Front Fenders</li>
                    <li><i class="fa-solid fa-check"></i> Front Bumper</li>
                    <li><i class="fa-solid fa-check"></i> Headlights & Mirrors</li>
                    <li><i class="fa-solid fa-check"></i> A-Pillars</li>
                </ul>
                <button class="btn-glow" style="width:100%; margin-top:20px; background:var(--secondary); color:black;" onclick="document.getElementById('contact').scrollIntoView()">SELECT TIER</button>
            </div>
            <div class="tilt-card price-card">
                <h3 class="pkg-title">FULL BODY</h3>
                <span class="pkg-sub">Ultimate Armor</span>
                <ul class="pkg-list">
                    <li><i class="fa-solid fa-check"></i> Entire Vehicle Paint</li>
                    <li><i class="fa-solid fa-check"></i> All Edges Wrapped</li>
                    <li><i class="fa-solid fa-check"></i> Complete Self-Healing</li>
                    <li><i class="fa-solid fa-check"></i> Max Resale Value</li>
                </ul>
                <button class="btn-glow" style="width:100%; margin-top:20px;" onclick="document.getElementById('contact').scrollIntoView()">SELECT TIER</button>
            </div>
        </div>
    </section>

    <section id="contact" class="section-pad contact-section">
        <div class="contact-glass reveal">
            <div class="c-info">
                <h3>CONTACT US</h3>
                <div class="c-item">
                    <span>VISIT</span>
                    <p>25294 Spring Creek Rd<br>Washington, IL 61571</p>
                </div>
                <div class="c-item">
                    <span>CALL</span>
                    <p>309-857-2779</p>
                </div>
                <div class="c-item">
                    <span>EMAIL</span>
                    <p>peoriaclearguard@gmail.com</p>
                </div>
                <div class="appt-warning"><i class="fa-solid fa-triangle-exclamation"></i> VISIT SITE ON APPOINTMENT BASIS ONLY</div>
                <div class="socials" style="justify-content: flex-start; margin-top: 30px;">
                    <a href="https://www.facebook.com/peoriaclear.guard" target="_blank"><i class="fa-brands fa-facebook-f"></i></a>
                    <a href="https://www.instagram.com/peoria_clear_guard/" target="_blank"><i class="fa-brands fa-instagram"></i></a>
                </div>
            </div>

            <div class="c-form">
                <div id="success-msg" class="success-message">
                    <i class="fa-solid fa-circle-check success-icon"></i>
                    <h3 class="success-title">INQUIRY SENT</h3>
                    <p class="success-text">Thank you for contacting Peoria Clear Guard. We have received your details and will get back to you shortly.</p>
                </div>
                <form id="contact-form">
                    <div class="form-row">
                        <div class="field-wrap">
                            <input type="text" class="input-glow" id="from_name" required>
                            <label class="label-glow">Full Name</label>
                        </div>
                        <div class="field-wrap">
                            <input type="text" class="input-glow" id="phone" required>
                            <label class="label-glow">Phone Number</label>
                        </div>
                    </div>
                    <div class="field-wrap" style="margin-bottom: 25px;">
                        <input type="email" class="input-glow" id="reply_to" required>
                        <label class="label-glow">Email Address</label>
                    </div>
                    <div class="field-wrap" style="margin-bottom: 25px;">
                        <input type="text" class="input-glow" id="car_details">
                        <label class="label-glow">Vehicle Details (Year/Make/Model)</label>
                    </div>
                    <div class="field-wrap" style="margin-bottom: 30px;">
                        <input type="text" class="input-glow" id="message">
                        <label class="label-glow">Additional Notes</label>
                    </div>
                    <button type="submit" id="submit-btn" class="submit-btn">Submit Inquiry</button>
                </form>
            </div>
        </div>
    </section>

    <section class="section-pad">
        <div class="section-header reveal-blur">
            <h2>COMMON <span>QUESTIONS</span></h2>
            <div class="divider"></div>
        </div>
        <div class="faq-container reveal">
            <div class="faq-item">
                <button class="faq-question">How long does the film last? <i class="fa-solid fa-chevron-down faq-icon"></i></button>
                <div class="faq-answer"><p>Our XPEL Ultimate Plus film comes with a comprehensive 10-year warranty against yellowing, staining, cracking, blistering, and delaminating.</p></div>
            </div>
            <div class="faq-item">
                <button class="faq-question">Can I wash my car normally? <i class="fa-solid fa-chevron-down faq-icon"></i></button>
                <div class="faq-answer"><p>Yes, but we recommend waiting 14 days after installation to allow the film to fully cure. After that, you can wash it as normal, though we recommend touchless washes or hand washing for best results.</p></div>
            </div>
            <div class="faq-item">
                <button class="faq-question">Does the film damage the paint upon removal? <i class="fa-solid fa-chevron-down faq-icon"></i></button>
                <div class="faq-answer"><p>No. The film is designed to be removed without damaging the factory paint, leaving your car looking exactly as it did the day the film was installed.</p></div>
            </div>
        </div>
    </section>

    <section id="location-map" class="map-wrapper reveal">
        <iframe class="map-frame" src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3032.5332502690226!2d-89.4316904!3d40.697416999999995!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x880a5e8f1f1f1f1f%3A0x0!2s25294%20Spring%20Creek%20Rd%2C%20Washington%2C%20IL%2061571!5e0!3m2!1sen!2sus!4v1689000000000!5m2!1sen!2sus" allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe>
        <div class="map-overlay-text"><i class="fa-solid fa-triangle-exclamation" style="color:var(--warning)"></i> VISIT SITE ON APPOINTMENT BASIS ONLY</div>
    </section>

    <footer>
        <span class="font-tech" style="font-size:1.2rem;">PEORIA <span style="color:var(--primary)">CLEAR GUARD</span></span>
        <p style="margin-bottom:0; margin-top:10px;">© 2025 All Rights Reserved.</p>
    </footer>

    <div id="lightbox" class="lightbox" onclick="closeLightbox()">
        <span class="close-lb">×</span>
        <img id="lb-img" src="">
    </div>

    <div class="fab-container">
        <a href="tel:3098572779" class="fab fab-call" title="Call Us"><i class="fa-solid fa-phone-volume"></i></a>
        <a href="sms:3098572779?body=Hi%20Peoriappf%20Team%2C%20My%20Name%20is%3A%20%0AQuery%3A%20" class="fab fab-sms" title="Send SMS"><i class="fa-solid fa-comment-sms"></i></a>
        <a href="https://www.google.com/maps/search/?api=1&query=25294+Spring+Creek+Rd+Washington+IL+61571" target="_blank" class="fab fab-loc" title="Get Directions"><i class="fa-solid fa-location-dot"></i></a>
    </div>

    <script>
        function toggleMobileMenu() {
            document.getElementById('mobile-nav').classList.toggle('active');
        }

        (function() { 
            emailjs.init("AxoRDEC8toiFDgGtX"); 
        })();

        document.getElementById('contact-form').addEventListener('submit', function(event) {
            event.preventDefault(); 
            const btn = document.getElementById('submit-btn');
            const form = document.getElementById('contact-form');
            const successMsg = document.getElementById('success-msg');
            btn.innerText = 'SENDING...';
            btn.disabled = true;
            const templateParams = {
                from_name: document.getElementById('from_name').value,
                phone: document.getElementById('phone').value,
                reply_to: document.getElementById('reply_to').value,
                car_details: document.getElementById('car_details').value,
                message: document.getElementById('message').value
            };
            // ⬇️ Service ID Updated Here
            emailjs.send('service_h61g7lx', 'template_gu33nli', templateParams)
                .then(function() { form.style.display = 'none'; successMsg.style.display = 'flex'; }, 
                function(error) { btn.innerText = 'FAILED. TRY AGAIN.'; btn.disabled = false; alert("EmailJS Error: " + JSON.stringify(error)); });
        });

        const faqItems = document.querySelectorAll('.faq-item');
        faqItems.forEach(item => {
            item.querySelector('.faq-question').addEventListener('click', () => {
                faqItems.forEach(other => { if (other !== item) other.classList.remove('active'); });
                item.classList.toggle('active');
            });
        });

        function smartImageLoader(img) {
            const currentSrc = img.src;
            if (currentSrc.includes('.jpg') && !currentSrc.includes('.jpg_tried')) {
                img.src = currentSrc.replace('.jpg', '.JPG') + "?retry=1";
                img.setAttribute('data-failed-once', 'true');
                return;
            }
            if (currentSrc.includes('.JPG') && !currentSrc.includes('.JPG_tried')) {
                img.src = currentSrc.replace('.JPG', '.jpeg') + "?retry=2";
                img.setAttribute('data-failed-once', 'true');
                return;
            }
            img.closest('.scroll-card').style.display = 'none';
        }

        document.addEventListener("DOMContentLoaded", () => {
            const oldImages = [ 'fer1.jpg', 'fer2.jpg', 'fer3.jpg', 'fer4.jpg', 'm2.jpg', 'm3.jpg', 'm4.jpg', 'm5.jpg', 'm6.jpg', 'm7.jpg', 'm8.jpg', 'm9.jpg', 'm10.jpg', 'm11.jpg', 'm12.jpg', 'm14.jpg', 'm15.jpg', 'm16.jpg' ];
            const newImages = [];
            for (let i = 1; i <= 33; i++) { newImages.push(`${i}.jpg`); }
            const allImages = [...oldImages, ...newImages];
            function shuffle(array) {
                for (let i = array.length - 1; i > 0; i--) {
                    const j = Math.floor(Math.random() * (i + 1));
                    [array[i], array[j]] = [array[j], array[i]];
                }
                return array;
            }
            const shuffled = shuffle(allImages);
            const half = Math.ceil(shuffled.length / 2);
            const topSet = shuffled.slice(0, half);
            const bottomSet = shuffled.slice(half);
            const trackTop = document.getElementById('track-top');
            const trackBottom = document.getElementById('track-bottom');
            function createCard(imgName) {
                return `<div class="scroll-card" onclick="openLightbox(this)"><img src="${imgName}" onerror="smartImageLoader(this)"><div class="scroll-overlay"><i class="fa-solid fa-eye"></i></div></div>`;
            }
            if(trackTop && trackBottom) {
                const topHTML = topSet.map(img => createCard(img)).join('');
                const bottomHTML = bottomSet.map(img => createCard(img)).join('');
                trackTop.innerHTML = topHTML + topHTML; 
                trackBottom.innerHTML = bottomHTML + bottomHTML; 
            }
        });

        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if(entry.isIntersecting) {
                    entry.target.classList.add('active');
                }
            });
        }, { threshold: 0.15 });

        document.querySelectorAll('.reveal, .reveal-blur').forEach(el => observer.observe(el));

        const lightbox = document.getElementById('lightbox');
        const lbImg = document.getElementById('lb-img');
        function openLightbox(el) {
            const src = el.querySelector('img').src;
            lbImg.src = src;
            lightbox.classList.add('active');
        }
        function closeLightbox() { lightbox.classList.remove('active'); }

        document.querySelectorAll('.tilt-card').forEach(card => {
            card.addEventListener('mousemove', (e) => {
                const rect = card.getBoundingClientRect();
                const x = e.clientX - rect.left;
                const y = e.clientY - rect.top;
                const centerX = rect.width / 2;
                const centerY = rect.height / 2;
                const rotateX = ((y - centerY) / centerY) * -5; 
                const rotateY = ((x - centerX) / centerX) * 5;
                card.style.setProperty('--x', `${x}px`);
                card.style.setProperty('--y', `${y}px`);
                card.style.transform = `perspective(1000px) rotateX(${rotateX}deg) rotateY(${rotateY}deg) scale3d(1.02, 1.02, 1.02)`;
            });
            card.addEventListener('mouseleave', () => {
                card.style.transform = 'perspective(1000px) rotateX(0) rotateY(0) scale3d(1, 1, 1)';
            });
        });

        (function() {
            'use strict';
            var canvas = document.getElementsByTagName( 'canvas' )[ 0 ];
            var config = { TEXTURE_DOWNSAMPLE: 1, DENSITY_DISSIPATION: 0.96, VELOCITY_DISSIPATION: 0.99, PRESSURE_DISSIPATION: 0.8, PRESSURE_ITERATIONS: 25, CURL: 30, SPLAT_RADIUS: 0.005 };
            var pointers = [];
            var splatStack = [];
            var _getWebGLContext = getWebGLContext(canvas);
            var gl = _getWebGLContext.gl;
            var ext = _getWebGLContext.ext;
            var support_linear_float = _getWebGLContext.support_linear_float;

            function getWebGLContext(canvas) {
                var params = { alpha: true, depth: false, stencil: false, antialias: false };
                var gl = canvas.getContext('webgl2', params);
                var isWebGL2 = !!gl;
                if (!isWebGL2) gl = canvas.getContext('webgl', params) || canvas.getContext('experimental-webgl', params);
                var halfFloat = gl.getExtension('OES_texture_half_float');
                var support_linear_float = gl.getExtension('OES_texture_half_float_linear');
                if (isWebGL2) { gl.getExtension('EXT_color_buffer_float'); support_linear_float = gl.getExtension('OES_texture_float_linear'); }
                gl.clearColor(0.0, 0.0, 0.0, 0.0);
                var internalFormat = isWebGL2 ? gl.RGBA16F : gl.RGBA;
                var internalFormatRG = isWebGL2 ? gl.RG16F : gl.RGBA;
                var formatRG = isWebGL2 ? gl.RG : gl.RGBA;
                var texType = isWebGL2 ? gl.HALF_FLOAT : halfFloat.HALF_FLOAT_OES;
                return { gl: gl, ext: { internalFormat: internalFormat, internalFormatRG: internalFormatRG, formatRG: formatRG, texType: texType }, support_linear_float: support_linear_float };
            }

            function pointerPrototype() { this.id = -1; this.x = 0; this.y = 0; this.dx = 0; this.dy = 0; this.down = false; this.moved = false; this.color = [30, 0, 300]; }
            pointers.push(new pointerPrototype());

            var GLProgram = function () {
                function GLProgram(vertexShader, fragmentShader) {
                    this.uniforms = {};
                    this.program = gl.createProgram();
                    gl.attachShader(this.program, vertexShader);
                    gl.attachShader(this.program, fragmentShader);
                    gl.linkProgram(this.program);
                    if (!gl.getProgramParameter(this.program, gl.LINK_STATUS)) throw gl.getProgramInfoLog(this.program);
                    var uniformCount = gl.getProgramParameter(this.program, gl.ACTIVE_UNIFORMS);
                    for (var i = 0; i < uniformCount; i++) {
                        var uniformName = gl.getActiveUniform(this.program, i).name;
                        this.uniforms[uniformName] = gl.getUniformLocation(this.program, uniformName);
                    }
                }
                GLProgram.prototype.bind = function bind() { gl.useProgram(this.program); };
                return GLProgram;
            }();

            function compileShader(type, source) {
                var shader = gl.createShader(type);
                gl.shaderSource(shader, source);
                gl.compileShader(shader);
                if (!gl.getShaderParameter(shader, gl.COMPILE_STATUS)) throw gl.getShaderInfoLog(shader);
                return shader;
            }

            var baseVertexShader = compileShader(gl.VERTEX_SHADER, 'precision highp float; precision mediump sampler2D; attribute vec2 aPosition; varying vec2 vUv; varying vec2 vL; varying vec2 vR; varying vec2 vT; varying vec2 vB; uniform vec2 texelSize; void main () {     vUv = aPosition * 0.5 + 0.5;     vL = vUv - vec2(texelSize.x, 0.0);     vR = vUv + vec2(texelSize.x, 0.0);     vT = vUv + vec2(0.0, texelSize.y);     vB = vUv - vec2(0.0, texelSize.y);     gl_Position = vec4(aPosition, 0.0, 1.0); }');
            var clearShader = compileShader(gl.FRAGMENT_SHADER, 'precision highp float; precision mediump sampler2D; varying vec2 vUv; uniform sampler2D uTexture; uniform float value; void main () {     gl_FragColor = value * texture2D(uTexture, vUv); }');
            var displayShader = compileShader(gl.FRAGMENT_SHADER, 'precision highp float; precision mediump sampler2D; varying vec2 vUv; uniform sampler2D uTexture; void main () {     gl_FragColor = texture2D(uTexture, vUv); }');
            var splatShader = compileShader(gl.FRAGMENT_SHADER, 'precision highp float; precision mediump sampler2D; varying vec2 vUv; uniform sampler2D uTarget; uniform float aspectRatio; uniform vec3 color; uniform vec2 point; uniform float radius; void main () {     vec2 p = vUv - point.xy;     p.x *= aspectRatio;     vec3 splat = exp(-dot(p, p) / radius) * color;     vec3 base = texture2D(uTarget, vUv).xyz;     gl_FragColor = vec4(base + splat, 1.0); }');
            var advectionManualFilteringShader = compileShader(gl.FRAGMENT_SHADER, 'precision highp float; precision mediump sampler2D; varying vec2 vUv; uniform sampler2D uVelocity; uniform sampler2D uSource; uniform vec2 texelSize; uniform float dt; uniform float dissipation; vec4 bilerp (in sampler2D sam, in vec2 p) {     vec4 st;     st.xy = floor(p - 0.5) + 0.5;     st.zw = st.xy + 1.0;     vec4 uv = st * texelSize.xyxy;     vec4 a = texture2D(sam, uv.xy);     vec4 b = texture2D(sam, uv.zy);     vec4 c = texture2D(sam, uv.xw);     vec4 d = texture2D(sam, uv.zw);     vec2 f = p - st.xy;     return mix(mix(a, b, f.x), mix(c, d, f.x), f.y); } void main () {     vec2 coord = gl_FragCoord.xy - dt * texture2D(uVelocity, vUv).xy;     gl_FragColor = dissipation * bilerp(uSource, coord);     gl_FragColor.a = 1.0; }');
            var advectionShader = compileShader(gl.FRAGMENT_SHADER, 'precision highp float; precision mediump sampler2D; varying vec2 vUv; uniform sampler2D uVelocity; uniform sampler2D uSource; uniform vec2 texelSize; uniform float dt; uniform float dissipation; void main () {     vec2 coord = vUv - dt * texture2D(uVelocity, vUv).xy * texelSize;     gl_FragColor = dissipation * texture2D(uSource, coord); }');
            var divergenceShader = compileShader(gl.FRAGMENT_SHADER, 'precision highp float; precision mediump sampler2D; varying vec2 vUv; varying vec2 vL; varying vec2 vR; varying vec2 vT; varying vec2 vB; uniform sampler2D uVelocity; vec2 sampleVelocity (in vec2 uv) {     vec2 multiplier = vec2(1.0, 1.0);     if (uv.x < 0.0) { uv.x = 0.0; multiplier.x = -1.0; }     if (uv.x > 1.0) { uv.x = 1.0; multiplier.x = -1.0; }     if (uv.y < 0.0) { uv.y = 0.0; multiplier.y = -1.0; }     if (uv.y > 1.0) { uv.y = 1.0; multiplier.y = -1.0; }     return multiplier * texture2D(uVelocity, uv).xy; } void main () {     float L = sampleVelocity(vL).x;     float R = sampleVelocity(vR).x;     float T = sampleVelocity(vT).y;     float B = sampleVelocity(vB).y;     float div = 0.5 * (R - L + T - B);     gl_FragColor = vec4(div, 0.0, 0.0, 1.0); }');
            var curlShader = compileShader(gl.FRAGMENT_SHADER, 'precision highp float; precision mediump sampler2D; varying vec2 vUv; varying vec2 vL; varying vec2 vR; varying vec2 vT; varying vec2 vB; uniform sampler2D uVelocity; void main () {     float L = texture2D(uVelocity, vL).y;     float R = texture2D(uVelocity, vR).y;     float T = texture2D(uVelocity, vT).x;     float B = texture2D(uVelocity, vB).x;     float vorticity = R - L - T + B;     gl_FragColor = vec4(vorticity, 0.0, 0.0, 1.0); }');
            var vorticityShader = compileShader(gl.FRAGMENT_SHADER, 'precision highp float; precision mediump sampler2D; varying vec2 vUv; varying vec2 vL; varying vec2 vR; varying vec2 vT; varying vec2 vB; uniform sampler2D uVelocity; uniform sampler2D uCurl; uniform float curl; uniform float dt; void main () {     float L = texture2D(uCurl, vL).y;     float R = texture2D(uCurl, vR).y;     float T = texture2D(uCurl, vT).x;     float B = texture2D(uCurl, vB).x;     float C = texture2D(uCurl, vUv).x;     vec2 force = vec2(abs(T) - abs(B), abs(R) - abs(L));     force *= 1.0 / length(force + 0.00001) * curl * C;     vec2 vel = texture2D(uVelocity, vUv).xy;     gl_FragColor = vec4(vel + force * dt, 0.0, 1.0); }');
            var pressureShader = compileShader(gl.FRAGMENT_SHADER, 'precision highp float; precision mediump sampler2D; varying vec2 vUv; varying vec2 vL; varying vec2 vR; varying vec2 vT; varying vec2 vB; uniform sampler2D uPressure; uniform sampler2D uDivergence; vec2 boundary (in vec2 uv) {     uv = min(max(uv, 0.0), 1.0);     return uv; } void main () {     float L = texture2D(uPressure, boundary(vL)).x;     float R = texture2D(uPressure, boundary(vR)).x;     float T = texture2D(uPressure, boundary(vT)).x;     float B = texture2D(uPressure, boundary(vB)).x;     float C = texture2D(uPressure, vUv).x;     float divergence = texture2D(uDivergence, vUv).x;     float pressure = (L + R + B + T - divergence) * 0.25;     gl_FragColor = vec4(pressure, 0.0, 0.0, 1.0); }');
            var gradientSubtractShader = compileShader(gl.FRAGMENT_SHADER, 'precision highp float; precision mediump sampler2D; varying vec2 vUv; varying vec2 vL; varying vec2 vR; varying vec2 vT; varying vec2 vB; uniform sampler2D uPressure; uniform sampler2D uVelocity; vec2 boundary (in vec2 uv) {     uv = min(max(uv, 0.0), 1.0);     return uv; } void main () {     float L = texture2D(uPressure, boundary(vL)).x;     float R = texture2D(uPressure, boundary(vR)).x;     float T = texture2D(uPressure, boundary(vT)).x;     float B = texture2D(uPressure, boundary(vB)).x;     vec2 velocity = texture2D(uVelocity, vUv).xy;     velocity.xy -= vec2(R - L, T - B);     gl_FragColor = vec4(velocity, 0.0, 1.0); }');

            var textureWidth = void 0;
            var textureHeight = void 0;
            var density = void 0;
            var velocity = void 0;
            var divergence = void 0;
            var curl = void 0;
            var pressure = void 0;
            initFramebuffers();
            var clearProgram = new GLProgram(baseVertexShader, clearShader);
            var displayProgram = new GLProgram(baseVertexShader, displayShader);
            var splatProgram = new GLProgram(baseVertexShader, splatShader);
            var advectionProgram = new GLProgram(baseVertexShader, support_linear_float ? advectionShader : advectionManualFilteringShader);
            var divergenceProgram = new GLProgram(baseVertexShader, divergenceShader);
            var curlProgram = new GLProgram(baseVertexShader, curlShader);
            var vorticityProgram = new GLProgram(baseVertexShader, vorticityShader);
            var pressureProgram = new GLProgram(baseVertexShader, pressureShader);
            var gradienSubtractProgram = new GLProgram(baseVertexShader, gradientSubtractShader);

            function initFramebuffers() {
                textureWidth = gl.drawingBufferWidth >> config.TEXTURE_DOWNSAMPLE;
                textureHeight = gl.drawingBufferHeight >> config.TEXTURE_DOWNSAMPLE;
                var iFormat = ext.internalFormat;
                var iFormatRG = ext.internalFormatRG;
                var formatRG = ext.formatRG;
                var texType = ext.texType;
                density = createDoubleFBO(0, textureWidth, textureHeight, iFormat, gl.RGBA, texType, support_linear_float ? gl.LINEAR : gl.NEAREST);
                velocity = createDoubleFBO(2, textureWidth, textureHeight, iFormatRG, formatRG, texType, support_linear_float ? gl.LINEAR : gl.NEAREST);
                divergence = createFBO(4, textureWidth, textureHeight, iFormatRG, formatRG, texType, gl.NEAREST);
                curl = createFBO(5, textureWidth, textureHeight, iFormatRG, formatRG, texType, gl.NEAREST);
                pressure = createDoubleFBO(6, textureWidth, textureHeight, iFormatRG, formatRG, texType, gl.NEAREST);
            }

            function createFBO(texId, w, h, internalFormat, format, type, param) {
                gl.activeTexture(gl.TEXTURE0 + texId);
                var texture = gl.createTexture();
                gl.bindTexture(gl.TEXTURE_2D, texture);
                gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, param);
                gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, param);
                gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);
                gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);
                gl.texImage2D(gl.TEXTURE_2D, 0, internalFormat, w, h, 0, format, type, null);
                var fbo = gl.createFramebuffer();
                gl.bindFramebuffer(gl.FRAMEBUFFER, fbo);
                gl.framebufferTexture2D(gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT0, gl.TEXTURE_2D, texture, 0);
                gl.viewport(0, 0, w, h);
                gl.clear(gl.COLOR_BUFFER_BIT);
                return [texture, fbo, texId];
            }

            function createDoubleFBO(texId, w, h, internalFormat, format, type, param) {
                var fbo1 = createFBO(texId, w, h, internalFormat, format, type, param);
                var fbo2 = createFBO(texId + 1, w, h, internalFormat, format, type, param);
                return { get first() { return fbo1; }, get second() { return fbo2; }, swap: function swap() { var temp = fbo1; fbo1 = fbo2; fbo2 = temp; } };
            }

            var blit = function () {
                gl.bindBuffer(gl.ARRAY_BUFFER, gl.createBuffer());
                gl.bufferData(gl.ARRAY_BUFFER, new Float32Array([-1, -1, -1, 1, 1, 1, 1, -1]), gl.STATIC_DRAW);
                gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, gl.createBuffer());
                gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, new Uint16Array([0, 1, 2, 0, 2, 3]), gl.STATIC_DRAW);
                gl.vertexAttribPointer(0, 2, gl.FLOAT, false, 0, 0);
                gl.enableVertexAttribArray(0);
                return function (destination) { gl.bindFramebuffer(gl.FRAMEBUFFER, destination); gl.drawElements(gl.TRIANGLES, 6, gl.UNSIGNED_SHORT, 0); };
            }();

            var lastTime = Date.now();
            update();

            function update() {
                resizeCanvas();
                var dt = Math.min((Date.now() - lastTime) / 1000, 0.016);
                lastTime = Date.now();
                gl.viewport(0, 0, textureWidth, textureHeight);
                if (splatStack.length > 0) {
                    for (var m = 0; m < splatStack.pop(); m++) {
                        var color = [0.8, 0.8, 0.8]; // Silver
                        var x = canvas.width * Math.random();
                        var y = canvas.height * Math.random();
                        var dx = 1000 * (Math.random() - 0.5);
                        var dy = 1000 * (Math.random() - 0.5);
                        splat(x, y, dx, dy, color);
                    }
                }
                advectionProgram.bind();
                gl.uniform2f(advectionProgram.uniforms.texelSize, 1.0 / textureWidth, 1.0 / textureHeight);
                gl.uniform1i(advectionProgram.uniforms.uVelocity, velocity.first[2]);
                gl.uniform1i(advectionProgram.uniforms.uSource, velocity.first[2]);
                gl.uniform1f(advectionProgram.uniforms.dt, dt);
                gl.uniform1f(advectionProgram.uniforms.dissipation, config.VELOCITY_DISSIPATION);
                blit(velocity.second[1]);
                velocity.swap();
                gl.uniform1i(advectionProgram.uniforms.uVelocity, velocity.first[2]);
                gl.uniform1i(advectionProgram.uniforms.uSource, density.first[2]);
                gl.uniform1f(advectionProgram.uniforms.dissipation, config.DENSITY_DISSIPATION);
                blit(density.second[1]);
                density.swap();
                for (var i = 0, len = pointers.length; i < len; i++) {
                    var pointer = pointers[i];
                    if (pointer.moved) {
                        splat(pointer.x, pointer.y, pointer.dx, pointer.dy, pointer.color);
                        pointer.moved = false;
                    }
                }
                curlProgram.bind();
                gl.uniform2f(curlProgram.uniforms.texelSize, 1.0 / textureWidth, 1.0 / textureHeight);
                gl.uniform1i(curlProgram.uniforms.uVelocity, velocity.first[2]);
                blit(curl[1]);
                vorticityProgram.bind();
                gl.uniform2f(vorticityProgram.uniforms.texelSize, 1.0 / textureWidth, 1.0 / textureHeight);
                gl.uniform1i(vorticityProgram.uniforms.uVelocity, velocity.first[2]);
                gl.uniform1i(vorticityProgram.uniforms.uCurl, curl[2]);
                gl.uniform1f(vorticityProgram.uniforms.curl, config.CURL);
                gl.uniform1f(vorticityProgram.uniforms.dt, dt);
                blit(velocity.second[1]);
                velocity.swap();
                divergenceProgram.bind();
                gl.uniform2f(divergenceProgram.uniforms.texelSize, 1.0 / textureWidth, 1.0 / textureHeight);
                gl.uniform1i(divergenceProgram.uniforms.uVelocity, velocity.first[2]);
                blit(divergence[1]);
                clearProgram.bind();
                var pressureTexId = pressure.first[2];
                gl.activeTexture(gl.TEXTURE0 + pressureTexId);
                gl.bindTexture(gl.TEXTURE_2D, pressure.first[0]);
                gl.uniform1i(clearProgram.uniforms.uTexture, pressureTexId);
                gl.uniform1f(clearProgram.uniforms.value, config.PRESSURE_DISSIPATION);
                blit(pressure.second[1]);
                pressure.swap();
                pressureProgram.bind();
                gl.uniform2f(pressureProgram.uniforms.texelSize, 1.0 / textureWidth, 1.0 / textureHeight);
                gl.uniform1i(pressureProgram.uniforms.uDivergence, divergence[2]);
                pressureTexId = pressure.first[2];
                gl.activeTexture(gl.TEXTURE0 + pressureTexId);
                for (var _i = 0; _i < config.PRESSURE_ITERATIONS; _i++) {
                    gl.bindTexture(gl.TEXTURE_2D, pressure.first[0]);
                    gl.uniform1i(pressureProgram.uniforms.uPressure, pressureTexId);
                    blit(pressure.second[1]);
                    pressure.swap();
                }
                gradienSubtractProgram.bind();
                gl.uniform2f(gradienSubtractProgram.uniforms.texelSize, 1.0 / textureWidth, 1.0 / textureHeight);
                gl.uniform1i(gradienSubtractProgram.uniforms.uPressure, pressure.first[2]);
                gl.uniform1i(gradienSubtractProgram.uniforms.uVelocity, velocity.first[2]);
                blit(velocity.second[1]);
                velocity.swap();
                gl.viewport(0, 0, gl.drawingBufferWidth, gl.drawingBufferHeight);
                displayProgram.bind();
                gl.uniform1i(displayProgram.uniforms.uTexture, density.first[2]);
                blit(null);
                requestAnimationFrame(update);
            }

            function splat(x, y, dx, dy, color) {
                splatProgram.bind();
                gl.uniform1i(splatProgram.uniforms.uTarget, velocity.first[2]);
                gl.uniform1f(splatProgram.uniforms.aspectRatio, canvas.width / canvas.height);
                gl.uniform2f(splatProgram.uniforms.point, x / canvas.width, 1.0 - y / canvas.height);
                gl.uniform3f(splatProgram.uniforms.color, dx, -dy, 1.0);
                gl.uniform1f(splatProgram.uniforms.radius, config.SPLAT_RADIUS);
                blit(velocity.second[1]);
                velocity.swap();
                gl.uniform1i(splatProgram.uniforms.uTarget, density.first[2]);
                gl.uniform3f(splatProgram.uniforms.color, color[0] * 0.3, color[1] * 0.3, color[2] * 0.3);
                blit(density.second[1]);
                density.swap();
            }

            function resizeCanvas() {
                (canvas.width !== canvas.clientWidth || canvas.height !== canvas.clientHeight) && (canvas.width = canvas.clientWidth, canvas.height = canvas.clientHeight, initFramebuffers());
            }

            var colorArr = [0.8, 0.8, 0.8]; // Silver color fixed
            
            window.addEventListener('mousemove', function (e) {
                if (e.clientY > window.innerHeight) return; // Only trigger in hero section
                pointers[0].down = true;
                pointers[0].color = colorArr;
                pointers[0].moved = pointers[0].down;
                pointers[0].dx = (e.clientX - pointers[0].x) * 5.0;
                pointers[0].dy = (e.clientY - pointers[0].y) * 5.0;
                pointers[0].x = e.clientX;
                pointers[0].y = e.clientY;
            });

            window.addEventListener('touchmove', function (e) {
                if (e.touches[0].clientY > window.innerHeight) return;
                var touches = e.targetTouches;
                for (var i = 0, len = touches.length; i < len; i++) {
                    if (i >= pointers.length) pointers.push(new pointerPrototype());
                    pointers[i].id = touches[i].identifier;
                    pointers[i].down = true;
                    pointers[i].x = touches[i].pageX;
                    pointers[i].y = touches[i].pageY;
                    pointers[i].color = colorArr;
                    var pointer = pointers[i];
                    pointer.moved = pointer.down;
                    pointer.dx = (touches[i].pageX - pointer.x) * 8.0;
                    pointer.dy = (touches[i].pageY - pointer.y) * 8.0;
                    pointer.x = touches[i].pageX;
                    pointer.y = touches[i].pageY;
                }
            }, false);
        })();
    </script>
</body>
</html>
